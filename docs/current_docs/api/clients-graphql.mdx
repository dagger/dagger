---
slug: /api/clients/graphql
---
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# GraphQL Clients

It's possible to call the Dagger API from [any language that supports GraphQL](https://graphql.org/code/). GraphQL has a large and growing list of client implementations in over 20 languages.

Dagger creates a unique local API endpoint for GraphQL queries for every Dagger session. This API endpoint is served by the local host at the port specified by the `DAGGER_SESSION_PORT` environment variable, and can be directly read from the environment in your client code. For example, if `DAGGER_SESSION_PORT` is set to `12345`, the API endpoint can be reached at `http://127.0.0.1:$DAGGER_SESSION_PORT/query`

:::warning
Dagger protects the exposed API with an HTTP Basic authentication token which can be retrieved from the `DAGGER_SESSION_TOKEN` variable. Treat the `DAGGER_SESSION_TOKEN` value as you would any other sensitive credential. Store it securely and avoid passing it to, or over, insecure applications and networks.
:::

This example demonstrates how to connect to the Dagger API and run a simple pipeline in the following languages:

- Rust, using the [gql_client library](https://github.com/arthurkhlghatyan/gql-client-rs) (MIT License)
- PHP, using the [php-graphql-client library](https://github.com/mghoneimy/php-graphql-client) (MIT License)

Create a new directory for the project and install the GraphQL client.

<Tabs>
<TabItem value="Rust">

```shell
mkdir my-project
cd my-project
cargo init
cargo add gql_client@1.0.7
cargo add serde_json@1.0.125
cargo add tokio@1.39.3 -F full
cargo add base64@0.22.1
```

</TabItem>
<TabItem value="PHP">

```shell
mkdir my-project
cd my-project
composer require gmostafa/php-graphql-client
```

</TabItem>
</Tabs>

Once the client library is installed, create a Dagger API client.

<Tabs>
<TabItem value="Rust">

Add the following code to `src/main.rs`:

```rust file=./snippets/clients-graphql/main.rs
```

</TabItem>
<TabItem value="PHP">

Create a new file named `client.php` and add the following code to it:

```php file=./snippets/clients-graphql/client.php
```

</TabItem>
</Tabs>

This code listing initializes the GraphQL client library and defines the Dagger pipeline to be executed as a Dagger API query. The `dagger run` command takes care of initializing a new local instance (or reusing a running instance) of the Dagger Engine on the host system and executing a specified command against it.

Run the Dagger API client using the Dagger CLI as follows:

<Tabs>
<TabItem value="Rust">
```shell
dagger run cargo run
```
</TabItem>
<TabItem value="PHP">
```shell
dagger run php client.php
```
</TabItem>
</Tabs>

Here is an example of the output:

```shell
buildkitsandbox 6.1.0-23-cloud-amd64 unknown Linux
```
