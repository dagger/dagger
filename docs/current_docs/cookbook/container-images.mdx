---
title: "Container Images"
slug: /cookbook/container-images
description: "Learn how to work with container images in your applications using Dagger with practical examples."
sidebar_label: "Container Images"
---

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";

Dagger allows you to build, publish, and export container images, also known as just-in-time artifacts, as part of your Dagger Functions. This section shows you how to work with container images using Dagger with practical examples.

### Publish a container image to a private registry

The following Dagger Function publishes a just-in-time container image to a private registry.

<Tabs groupId="language" queryString="sdk">
<TabItem value="go" label="Go">

```go file=./snippets/publish-image/go/main.go
```

</TabItem>
<TabItem value="python" label="Python">

```python file=./snippets/publish-image/python/main.py
```

</TabItem>
<TabItem value="typescript" label="TypeScript">

```typescript file=./snippets/publish-image/typescript/index.ts
```

</TabItem>
</Tabs>

#### Examples

- Publish a just-in-time container image to Docker Hub, using the account username `user` and the password set in the `PASSWORD` environment variable:

    <Tabs groupId="shell">
    <TabItem value="System shell">
    ```shell
    dagger -c 'publish docker.io user env://PASSWORD'
    ```
    </TabItem>
    <TabItem value="Dagger Shell">
    ```shell title="First type 'dagger' for interactive mode."
    publish docker.io user env://PASSWORD
    ```
    </TabItem>
    <TabItem value="Dagger CLI">
    ```shell
    dagger call publish --registry=docker.io --username=user --password=env://PASSWORD
    ```
    </TabItem>
    </Tabs>

- Publish a just-in-time container image to GitHub Container Registry, using the account username `user` and the GitHub personal access token set in the `PASSWORD` environment variable:

    <Tabs groupId="shell">
    <TabItem value="System shell">
    ```shell
    dagger -c 'publish gchr.io user env://PASSWORD'
    ```
    </TabItem>
    <TabItem value="Dagger Shell">
    ```shell title="First type 'dagger' for interactive mode."
    publish gchr.io user env://PASSWORD
    ```
    </TabItem>
    <TabItem value="Dagger CLI">
    ```shell
    dagger call publish --registry=gchr.io --username=user --password=env://PASSWORD
    ```
    </TabItem>
    </Tabs>

### Publish a container image to a private registry with multiple tags

The following Dagger Function tags a just-in-time container image multiple times and publishes it to a private registry.

<Tabs groupId="language" queryString="sdk">
<TabItem value="go" label="Go">

```go file=./snippets/tag-publish-image/go/main.go
```

</TabItem>
<TabItem value="python" label="Python">

```python file=./snippets/tag-publish-image/python/main.py
```

</TabItem>
<TabItem value="typescript" label="TypeScript">

```typescript file=./snippets/tag-publish-image/typescript/index.ts
```

</TabItem>
</Tabs>

#### Examples

- Tag and publish a just-in-time container image to Docker Hub, using the account username `user` and the password set in the `PASSWORD` environment variable:

    <Tabs groupId="shell">
    <TabItem value="System shell">
    ```shell
    dagger -c 'publish docker.io user env://PASSWORD'
    ```
    </TabItem>
    <TabItem value="Dagger Shell">
    ```shell title="First type 'dagger' for interactive mode."
    publish docker.io user env://PASSWORD
    ```
    </TabItem>
    <TabItem value="Dagger CLI">
    ```shell
    dagger call publish --registry=docker.io --username=user --password=env://PASSWORD
    ```
    </TabItem>
    </Tabs>

- Tag and publish a just-in-time container image to GitHub Container Registry, using the account username `user` and the GitHub personal access token set in the `PASSWORD` environment variable:

    <Tabs groupId="shell">
    <TabItem value="System shell">
    ```shell
    dagger -c 'publish gchr.io user env://PASSWORD'
    ```
    </TabItem>
    <TabItem value="Dagger Shell">
    ```shell title="First type 'dagger' for interactive mode."
    publish gchr.io user env://PASSWORD
    ```
    </TabItem>
    <TabItem value="Dagger CLI">
    ```shell
    dagger call publish --registry=gchr.io --username=user --password=env://PASSWORD
    ```
    </TabItem>
    </Tabs>

### Build and load a container image into the host Docker Engine

The following Dagger Function builds a just-in-time container image and loads it into the Docker Engine running on the host.

<Tabs groupId="language" queryString="sdk">
<TabItem value="go" label="Go">

```go file=./snippets/load-image-host/go/main.go
```

</TabItem>
<TabItem value="python" label="Python">

```python file=./snippets/load-image-host/python/main.py
```

</TabItem>
<TabItem value="typescript" label="TypeScript">

```typescript file=./snippets/load-image-host/typescript/index.ts
```

</TabItem>
</Tabs>

#### Example

Build and load a just-in-time container image into the Docker Engine running on the host:

<Tabs groupId="shell">
<TabItem value="System shell">
```shell
dagger -c 'load /var/run/docker.sock myimage'
```
</TabItem>
<TabItem value="Dagger Shell">
```shell title="First type 'dagger' for interactive mode."
load /var/run/docker.sock myimage
```
</TabItem>
<TabItem value="Dagger CLI">
```shell
dagger call load --docker=/var/run/docker.sock --tag=myimage
```
</TabItem>
</Tabs>

### Export a directory or file to the host

The following Dagger Functions return a just-in-time directory and file. These outputs can be exported to the host with `dagger call ... export ...`.

:::note
When a host directory or file is copied or mounted to a container's filesystem, modifications made to it in the container do not automatically transfer back to the host. Data flows only one way between Dagger operations, because they are connected in a DAG. To transfer modifications back to the local host, you must explicitly export the directory or file back to the host filesystem.
:::

<Tabs groupId="language" queryString="sdk">
<TabItem value="go" label="Go">

```go file=./snippets/export-file-dir/go/main.go
```

</TabItem>
<TabItem value="python" label="Python">

```python file=./snippets/export-file-dir/python/main.py
```

</TabItem>
<TabItem value="typescript" label="TypeScript">

```typescript file=./snippets/export-file-dir/typescript/index.ts
```

</TabItem>
</Tabs>

#### Examples

- Export the directory returned by the Dagger Function to the `/home/admin/export` path on the host:

    <Tabs groupId="shell">
    <TabItem value="System shell">
    ```shell
    dagger -c 'get-dir | export /home/admin/export'
    ```
    </TabItem>
    <TabItem value="Dagger Shell">
    ```shell title="First type 'dagger' for interactive mode."
    get-dir | export /home/admin/export
    ```
    </TabItem>
    <TabItem value="Dagger CLI">
    ```shell
    dagger call get-dir export --path=/home/admin/export
    ```
    </TabItem>
    </Tabs>

- Export the file returned by the Dagger Function to the `/home/admin/myfile` path on the host:

    <Tabs groupId="shell">
    <TabItem value="System shell">
    ```shell
    dagger -c 'get-file | export /home/admin/myfile'
    ```
    </TabItem>
    <TabItem value="Dagger Shell">
    ```shell title="First type 'dagger' for interactive mode."
    get-file | export /home/admin/myfile
    ```
    </TabItem>
    <TabItem value="Dagger CLI">
    ```shell
    dagger call get-file export --path=/home/admin/myfile
    ```
    </TabItem>
    </Tabs>

### Export a container image to the host

The following Dagger Function returns a just-in-time container. This can be exported to the host as an OCI tarball.

<Tabs groupId="language" queryString="sdk">
<TabItem value="go" label="Go">

```go file=./snippets/export-container/go/main.go
```

</TabItem>
<TabItem value="python" label="Python">

```python file=./snippets/export-container/python/main.py
```

</TabItem>
<TabItem value="typescript" label="TypeScript">

```typescript file=./snippets/export-container/typescript/index.ts
```

</TabItem>
</Tabs>

#### Example

Export the container image returned by the Dagger Function as an OCI tarball to the `/home/admin/mycontainer.tgz` path on the host. This OCI tarball can then be loaded into Docker with `docker load ...`.

    <Tabs groupId="shell">
    <TabItem value="System shell">
    ```shell
    dagger -c 'base | export /home/admin/mycontainer.tgz'
    ```
    </TabItem>
    <TabItem value="Dagger Shell">
    ```shell title="First type 'dagger' for interactive mode."
    base | export /home/admin/mycontainer.tgz
    ```
    </TabItem>
    <TabItem value="Dagger CLI">
    ```shell
    dagger call base export --path=/home/admin/mycontainer.tgz
    ```
    </TabItem>
    </Tabs>
