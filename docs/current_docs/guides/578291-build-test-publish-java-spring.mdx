---
slug: /guides/578291/build-test-publish-java-spring
displayed_sidebar: "current"
category: "guides"
tags: ["java", "spring"]
authors: ["Vikram Vaswani"]
date: "2024-04-04"
---

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";

# Build, Test and Publish a Spring Application with Dagger

## Introduction

This tutorial explains how to use Dagger to build, test and publish a Java application using Spring. You will learn how to create Dagger Functions to:
- Build your Spring application with all required dependencies
- Run unit tests for your Spring application
- Publish the final application image to Docker Hub

## Step 1: Initialize a new module

The example module used in this guide builds, tests and publishes a Spring application.

Run `dagger init` in the application directory to bootstrap a new module:

<Tabs groupId="language">
<TabItem value="Go">

```sh
dagger init --name=my-module --sdk=go
```

This will generate a `dagger.json` module file, an initial `dagger/main.go` source file, as well as a `dagger/dagger.gen.go` file and `dagger/internal/` directory.

</TabItem>
<TabItem value="Python">

```sh
dagger init --name=my-module --sdk=python
```

This will generate a `dagger.json` module file, initial `dagger/src/main.py` and `dagger/pyproject.toml` files, as well as a generated `dagger/sdk` folder for local development.

</TabItem>
<TabItem value="TypeScript">

```sh
dagger init --name=my-module --sdk=typescript
```

This will generate a `dagger.json` module file, initial `dagger/src/index.ts`, `dagger/package.json` and `dagger/tsconfig.json` files, as well as a generated `dagger/sdk` folder for local development.

</TabItem>
</Tabs>

## Step 2: Add dependencies

```shell
dagger install github.com/levlaz/daggerverse/mariadb@v0.2.1
dagger install github.com/jcsirot/daggerverse/java@250eb3e0f49da321cca2241fe1e1d017b4143a91
dagger install github.com/shykes/daggerverse/docker@3338120927f8e291c4780de691ef63a7c9d825c0
```

## Step 3:

Next, update the generated `dagger/main.go` file with the following code:

```go file=./snippets/build-test-publish-java-spring/go/main.go
```

FIXME

## Appendix A: Create a GitHub repository with an example Spring application

This tutorial assumes that you have a GitHub repository with a Spring application. If not, follow the steps below to create a GitHub repository and commit an example Spring application to it.

:::info
This section assumes that you have the GitHub CLI. If not, [install the GitHub CLI](https://github.com/cli/cli#installation) before proceeding.
:::

1. Log in to GitHub using the GitHub CLI:

  ```shell
  gh auth login
  ```

1. Create a directory for the Spring application:

  ```shell
  mkdir myapp
  cd myapp
  ```

1. Clone the [Spring Petclinic sample application](https://github.com/spring-projects/spring-petclinic):

  ```shell
  git clone https://github.com/spring-projects/spring-petclinic.git
  ```

1. Update the `.gitignore` file:

  ```shell
  echo node_modules >> .gitignore
  echo package*.json >> .gitignore
  echo .venv >> .gitignore
  git add .
  git commit -m "Updated .gitignore"
  ```

1. Remove existing GitHub Action workflows:

  ```shell
  rm -rf .github/workflows/*
  git add .
  git commit -m "Removed workflows"
  ```

1. Create a private repository in your GitHub account and push the code to it:

  ```shell
  gh repo create myapp --push --source . --private --remote github
  ```
