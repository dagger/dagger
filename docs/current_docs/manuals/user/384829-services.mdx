Dagger Functions enable users to spin up long-running services (as containers) and communicate with those services from other Dagger Functions or from the calling host by forwarding their ports. This is akin to a "programmable docker-compose".

:::note
It is also possible to [pass host network services to a Dagger Function](./053831-host-net.mdx), by explicitly specifying them as arguments in the form `tcp://<host>:<port>` when executing `dagger call`.
:::

- Each service container has a canonical, content-addressed hostname and an optional set of exposed ports.
- Service containers are started just-in-time, de-duplicated, and stopped when no longer needed.
- Service containers are health checked prior to running clients.

Some common scenarios for using services with Dagger Functions are:

- Starting a database service in a function and using it for storage or testing
- Instantiating a service in a function against which end-to-end integration tests can run
- Running sidecar services

To start a service returned by a function and have it forward traffic to a specified address via the host, use  `dagger call ... up`. If no port information is supplied, all of the service's ports are forwarded.

Here is an example of starting a MariaDB service on host port 3306 (the default MariaDB port) with the `serve` function of the `mariadb` module:

```shell
dagger -m github.com/levlaz/daggerverse/mariadb@b56073942f5fa65c42a63a524fc9276f7f040f2f call serve up
```

By default, each port maps to the same port on the host. To specify a different mapping, use the additional `--ports` argument with a list of host/service port mappings. To bind ports randomly, use the `--random` argument.

To start the same service and map MariaDB port 3306 to host port 39000, use:

```shell
dagger -m github.com/levlaz/daggerverse/mariadb@b56073942f5fa65c42a63a524fc9276f7f040f2f call serve up --ports=39000:3306
```

To start the same service and map MariaDB port 3306 to a random port on the host, use:

```shell
dagger -m github.com/levlaz/daggerverse/mariadb@b56073942f5fa65c42a63a524fc9276f7f040f2f call serve up --random
```
