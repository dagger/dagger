// This class has been generated by dagger-java-sdk. DO NOT EDIT.
package io.dagger.client;

import jakarta.json.bind.annotation.JsonbTypeDeserializer;
import jakarta.json.bind.annotation.JsonbTypeSerializer;
import jakarta.json.bind.serializer.DeserializationContext;
import jakarta.json.bind.serializer.JsonbDeserializer;
import jakarta.json.stream.JsonParser;
import java.lang.InterruptedException;
import java.lang.Override;
import java.lang.String;
import java.lang.reflect.Type;
import java.util.List;
import java.util.concurrent.ExecutionException;

/**
 * A definition of a custom object defined in a Module.
 */
@JsonbTypeSerializer(IDAbleSerializer.class)
@JsonbTypeDeserializer(ObjectTypeDef.Deserializer.class)
public class ObjectTypeDef implements IDAble<ObjectTypeDefID> {
    private QueryBuilder queryBuilder;

    private String description;

    private ObjectTypeDefID id;

    private String name;

    private String sourceModuleName;

    /**
     * Empty constructor for JSON-B deserialization
     */
    protected ObjectTypeDef() {
    }

    ObjectTypeDef(QueryBuilder queryBuilder) {
        this.queryBuilder = queryBuilder;
    }

    /**
     * <p>The function used to construct new instances of this object, if any</p>
     */
    public Function constructor() {
        QueryBuilder nextQueryBuilder = this.queryBuilder.chain("constructor");
        return new Function(nextQueryBuilder);
    }

    /**
     * <p>The doc string for the object, if any.</p>
     */
    public String description() throws InterruptedException, ExecutionException,
            DaggerQueryException {
        if (this.description != null) {
            return description;
        }
        QueryBuilder nextQueryBuilder = this.queryBuilder.chain("description");
        return nextQueryBuilder.executeQuery(java.lang.String.class);
    }

    /**
     * <p>Static fields defined on this object, if any.</p>
     */
    public List<FieldTypeDef> fields() throws InterruptedException, ExecutionException,
            DaggerQueryException {
        QueryBuilder nextQueryBuilder = this.queryBuilder.chain("fields");
        nextQueryBuilder = nextQueryBuilder.chain(List.of("id"));
        List<QueryBuilder> builders = nextQueryBuilder.executeObjectListQuery(FieldTypeDef.class);
        return builders.stream().map(qb -> new FieldTypeDef(qb)).toList();
    }

    /**
     * <p>Functions defined on this object, if any.</p>
     */
    public List<Function> functions() throws InterruptedException, ExecutionException,
            DaggerQueryException {
        QueryBuilder nextQueryBuilder = this.queryBuilder.chain("functions");
        nextQueryBuilder = nextQueryBuilder.chain(List.of("id"));
        List<QueryBuilder> builders = nextQueryBuilder.executeObjectListQuery(Function.class);
        return builders.stream().map(qb -> new Function(qb)).toList();
    }

    /**
     * <p>A unique identifier for this ObjectTypeDef.</p>
     */
    public ObjectTypeDefID id() throws InterruptedException, ExecutionException,
            DaggerQueryException {
        if (this.id != null) {
            return id;
        }
        QueryBuilder nextQueryBuilder = this.queryBuilder.chain("id");
        return nextQueryBuilder.executeQuery(ObjectTypeDefID.class);
    }

    /**
     * <p>The name of the object.</p>
     */
    public String name() throws InterruptedException, ExecutionException, DaggerQueryException {
        if (this.name != null) {
            return name;
        }
        QueryBuilder nextQueryBuilder = this.queryBuilder.chain("name");
        return nextQueryBuilder.executeQuery(java.lang.String.class);
    }

    /**
     * <p>The location of this object declaration.</p>
     */
    public SourceMap sourceMap() {
        QueryBuilder nextQueryBuilder = this.queryBuilder.chain("sourceMap");
        return new SourceMap(nextQueryBuilder);
    }

    /**
     * <p>If this ObjectTypeDef is associated with a Module, the name of the module. Unset otherwise.</p>
     */
    public String sourceModuleName() throws InterruptedException, ExecutionException,
            DaggerQueryException {
        if (this.sourceModuleName != null) {
            return sourceModuleName;
        }
        QueryBuilder nextQueryBuilder = this.queryBuilder.chain("sourceModuleName");
        return nextQueryBuilder.executeQuery(java.lang.String.class);
    }

    public static class Deserializer implements JsonbDeserializer<ObjectTypeDef> {
        @Override
        public ObjectTypeDef deserialize(JsonParser parser, DeserializationContext ctx, Type type) {
            String id = ctx.deserialize(String.class, parser);
            ObjectTypeDef o = Dagger.dag().loadObjectTypeDefFromID(new ObjectTypeDefID(id));
            return o;
        }
    }
}
