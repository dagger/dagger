<?php

/**
 * This class has been generated by dagger-php-sdk. DO NOT EDIT.
 */

declare(strict_types=1);

namespace DaggerIo\Gen;

/**
 * A file.
 */
class File extends \DaggerIo\Client\AbstractDaggerObject implements \DaggerIo\Client\IdAble
{
    /**
     * Retrieves the contents of the file.
     */
    public function contents(): string
    {
        $leafQueryBuilder = new \DaggerIo\Client\DaggerQueryBuilder('contents');
        return (string)$this->queryLeaf($leafQueryBuilder, 'contents');
    }

    /**
     * Writes the file to a file path on the host.
     */
    public function export(string $path, ?bool $allowParentDirPath = null): bool
    {
        $leafQueryBuilder = new \DaggerIo\Client\DaggerQueryBuilder('export');
        $leafQueryBuilder->setArgument('path', $path);
        if (null !== $allowParentDirPath) {
        $leafQueryBuilder->setArgument('allowParentDirPath', $allowParentDirPath);
        }
        return (bool)$this->queryLeaf($leafQueryBuilder, 'export');
    }

    /**
     * Retrieves the content-addressed identifier of the file.
     */
    public function id(): FileId
    {
        $leafQueryBuilder = new \DaggerIo\Client\DaggerQueryBuilder('id');
        return new \DaggerIo\Gen\FileId((string)$this->queryLeaf($leafQueryBuilder, 'id'));
    }

    /**
     * Gets the size of the file, in bytes.
     */
    public function size(): int
    {
        $leafQueryBuilder = new \DaggerIo\Client\DaggerQueryBuilder('size');
        return (int)$this->queryLeaf($leafQueryBuilder, 'size');
    }

    /**
     * Force evaluation in the engine.
     */
    public function sync(): FileId
    {
        $leafQueryBuilder = new \DaggerIo\Client\DaggerQueryBuilder('sync');
        return new \DaggerIo\Gen\FileId((string)$this->queryLeaf($leafQueryBuilder, 'sync'));
    }

    /**
     * Retrieves this file with its created/modified timestamps set to the given time.
     */
    public function withTimestamps(int $timestamp): File
    {
        $innerQueryBuilder = new \DaggerIo\Client\DaggerQueryBuilder('withTimestamps');
        $innerQueryBuilder->setArgument('timestamp', $timestamp);
        return new \DaggerIo\Gen\File($this->client, $this->queryBuilderChain->chain($innerQueryBuilder));
    }
}
