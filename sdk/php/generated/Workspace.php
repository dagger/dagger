<?php

/**
 * This class has been generated by dagger-php-sdk. DO NOT EDIT.
 */

declare(strict_types=1);

namespace Dagger;

/**
 * A Dagger workspace detected from the current working directory.
 */
class Workspace extends Client\AbstractObject implements Client\IdAble
{
    /**
     * The client ID that owns this workspace's host filesystem.
     */
    public function clientId(): string
    {
        $leafQueryBuilder = new \Dagger\Client\QueryBuilder('clientId');
        return (string)$this->queryLeaf($leafQueryBuilder, 'clientId');
    }

    /**
     * Returns a Directory from the workspace.
     *
     * Path is relative to workspace root. Use "." for the root directory.
     */
    public function directory(
        string $path,
        ?array $exclude = null,
        ?array $include = null,
        ?bool $gitignore = false,
    ): Directory {
        $innerQueryBuilder = new \Dagger\Client\QueryBuilder('directory');
        $innerQueryBuilder->setArgument('path', $path);
        if (null !== $exclude) {
        $innerQueryBuilder->setArgument('exclude', $exclude);
        }
        if (null !== $include) {
        $innerQueryBuilder->setArgument('include', $include);
        }
        if (null !== $gitignore) {
        $innerQueryBuilder->setArgument('gitignore', $gitignore);
        }
        return new \Dagger\Directory($this->client, $this->queryBuilderChain->chain($innerQueryBuilder));
    }

    /**
     * Returns a File from the workspace.
     *
     * Path is relative to workspace root.
     */
    public function file(string $path): File
    {
        $innerQueryBuilder = new \Dagger\Client\QueryBuilder('file');
        $innerQueryBuilder->setArgument('path', $path);
        return new \Dagger\File($this->client, $this->queryBuilderChain->chain($innerQueryBuilder));
    }

    /**
     * Search for a file or directory by walking up from the start path within the workspace.
     *
     * Returns the path relative to the workspace root if found, or null if not found.
     *
     * The search stops at the workspace root and will not traverse above it.
     */
    public function findUp(string $name, ?string $from = '.'): string
    {
        $leafQueryBuilder = new \Dagger\Client\QueryBuilder('findUp');
        $leafQueryBuilder->setArgument('name', $name);
        if (null !== $from) {
        $leafQueryBuilder->setArgument('from', $from);
        }
        return (string)$this->queryLeaf($leafQueryBuilder, 'findUp');
    }

    /**
     * A unique identifier for this Workspace.
     */
    public function id(): WorkspaceId
    {
        $leafQueryBuilder = new \Dagger\Client\QueryBuilder('id');
        return new \Dagger\WorkspaceId((string)$this->queryLeaf($leafQueryBuilder, 'id'));
    }

    /**
     * Absolute path to the workspace root directory.
     */
    public function root(): string
    {
        $leafQueryBuilder = new \Dagger\Client\QueryBuilder('root');
        return (string)$this->queryLeaf($leafQueryBuilder, 'root');
    }
}
