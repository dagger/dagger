<?php

/**
 * This class has been generated by dagger-php-sdk. DO NOT EDIT.
 */

declare(strict_types=1);

namespace Dagger;

/**
 * A Dagger workspace detected from the current working directory.
 */
class Workspace extends Client\AbstractObject implements Client\IdAble
{
    /**
     * Return all checks from modules loaded in the workspace.
     */
    public function checks(?array $include = null): CheckGroup
    {
        $innerQueryBuilder = new \Dagger\Client\QueryBuilder('checks');
        if (null !== $include) {
        $innerQueryBuilder->setArgument('include', $include);
        }
        return new \Dagger\CheckGroup($this->client, $this->queryBuilderChain->chain($innerQueryBuilder));
    }

    /**
     * The client ID that owns this workspace's host filesystem.
     */
    public function clientId(): string
    {
        $leafQueryBuilder = new \Dagger\Client\QueryBuilder('clientId');
        return (string)$this->queryLeaf($leafQueryBuilder, 'clientId');
    }

    /**
     * Path to config.toml relative to root (empty if not initialized).
     */
    public function configPath(): string
    {
        $leafQueryBuilder = new \Dagger\Client\QueryBuilder('configPath');
        return (string)$this->queryLeaf($leafQueryBuilder, 'configPath');
    }

    /**
     * Read a configuration value from config.toml.
     *
     * If key is empty, returns the full config. If key points to a scalar, returns the value. If key points to a table, returns flattened dotted-key output.
     */
    public function configRead(?string $key = ''): string
    {
        $leafQueryBuilder = new \Dagger\Client\QueryBuilder('configRead');
        if (null !== $key) {
        $leafQueryBuilder->setArgument('key', $key);
        }
        return (string)$this->queryLeaf($leafQueryBuilder, 'configRead');
    }

    /**
     * Write a configuration value to config.toml.
     *
     * Validates the key against the config schema and auto-detects value types.
     */
    public function configWrite(string $key, string $value): string
    {
        $leafQueryBuilder = new \Dagger\Client\QueryBuilder('configWrite');
        $leafQueryBuilder->setArgument('key', $key);
        $leafQueryBuilder->setArgument('value', $value);
        return (string)$this->queryLeaf($leafQueryBuilder, 'configWrite');
    }

    /**
     * Returns a Directory from the workspace.
     *
     * Relative paths resolve from the workspace root. Absolute paths resolve from the rootfs root.
     */
    public function directory(
        string $path,
        ?array $exclude = null,
        ?array $include = null,
        ?bool $gitignore = false,
    ): Directory {
        $innerQueryBuilder = new \Dagger\Client\QueryBuilder('directory');
        $innerQueryBuilder->setArgument('path', $path);
        if (null !== $exclude) {
        $innerQueryBuilder->setArgument('exclude', $exclude);
        }
        if (null !== $include) {
        $innerQueryBuilder->setArgument('include', $include);
        }
        if (null !== $gitignore) {
        $innerQueryBuilder->setArgument('gitignore', $gitignore);
        }
        return new \Dagger\Directory($this->client, $this->queryBuilderChain->chain($innerQueryBuilder));
    }

    /**
     * Returns a File from the workspace.
     *
     * Relative paths resolve from the workspace root. Absolute paths resolve from the rootfs root.
     */
    public function file(string $path): File
    {
        $innerQueryBuilder = new \Dagger\Client\QueryBuilder('file');
        $innerQueryBuilder->setArgument('path', $path);
        return new \Dagger\File($this->client, $this->queryBuilderChain->chain($innerQueryBuilder));
    }

    /**
     * Search for a file or directory by walking up from the start path within the workspace.
     *
     * Returns the path relative to the workspace root if found, or null if not found.
     *
     * The search stops at the workspace root and will not traverse above it.
     */
    public function findUp(string $name, ?string $from = '.'): string
    {
        $leafQueryBuilder = new \Dagger\Client\QueryBuilder('findUp');
        $leafQueryBuilder->setArgument('name', $name);
        if (null !== $from) {
        $leafQueryBuilder->setArgument('from', $from);
        }
        return (string)$this->queryLeaf($leafQueryBuilder, 'findUp');
    }

    /**
     * Return all generators from modules loaded in the workspace.
     */
    public function generators(?array $include = null): GeneratorGroup
    {
        $innerQueryBuilder = new \Dagger\Client\QueryBuilder('generators');
        if (null !== $include) {
        $innerQueryBuilder->setArgument('include', $include);
        }
        return new \Dagger\GeneratorGroup($this->client, $this->queryBuilderChain->chain($innerQueryBuilder));
    }

    /**
     * Whether a config.toml file exists in the workspace.
     */
    public function hasConfig(): bool
    {
        $leafQueryBuilder = new \Dagger\Client\QueryBuilder('hasConfig');
        return (bool)$this->queryLeaf($leafQueryBuilder, 'hasConfig');
    }

    /**
     * A unique identifier for this Workspace.
     */
    public function id(): WorkspaceId
    {
        $leafQueryBuilder = new \Dagger\Client\QueryBuilder('id');
        return new \Dagger\WorkspaceId((string)$this->queryLeaf($leafQueryBuilder, 'id'));
    }

    /**
     * Initialize a new workspace, creating .dagger/config.toml.
     */
    public function init(): string
    {
        $leafQueryBuilder = new \Dagger\Client\QueryBuilder('init');
        return (string)$this->queryLeaf($leafQueryBuilder, 'init');
    }

    /**
     * Whether .dagger/config.toml exists.
     */
    public function initialized(): bool
    {
        $leafQueryBuilder = new \Dagger\Client\QueryBuilder('initialized');
        return (bool)$this->queryLeaf($leafQueryBuilder, 'initialized');
    }

    /**
     * Install a module into the workspace, writing config.toml to the host.
     */
    public function install(string $ref, ?string $name = '', ?bool $blueprint = false): string
    {
        $leafQueryBuilder = new \Dagger\Client\QueryBuilder('install');
        $leafQueryBuilder->setArgument('ref', $ref);
        if (null !== $name) {
        $leafQueryBuilder->setArgument('name', $name);
        }
        if (null !== $blueprint) {
        $leafQueryBuilder->setArgument('blueprint', $blueprint);
        }
        return (string)$this->queryLeaf($leafQueryBuilder, 'install');
    }

    /**
     * Create a new module in the workspace, scaffold its files, and auto-install it in config.toml.
     */
    public function moduleInit(string $name, string $sdk, ?string $source = '', ?array $include = null): string
    {
        $leafQueryBuilder = new \Dagger\Client\QueryBuilder('moduleInit');
        $leafQueryBuilder->setArgument('name', $name);
        $leafQueryBuilder->setArgument('sdk', $sdk);
        if (null !== $source) {
        $leafQueryBuilder->setArgument('source', $source);
        }
        if (null !== $include) {
        $leafQueryBuilder->setArgument('include', $include);
        }
        return (string)$this->queryLeaf($leafQueryBuilder, 'moduleInit');
    }

    /**
     * Workspace path relative to root.
     */
    public function path(): string
    {
        $leafQueryBuilder = new \Dagger\Client\QueryBuilder('path');
        return (string)$this->queryLeaf($leafQueryBuilder, 'path');
    }
}
