"""
Note: For now, this file is not actually generated. Feel free to make edits.
"""
type TestSplit {
  pub source: Directory! @defaultPath(path: "/")

  let testSpecific(
    run: [String!]!,
    pkg: String! = "./core/integration",
  ): Void {
    go
      .env
      .withDirectory("/app", source)
      .withWorkdir("/app")
      .withExec(
        ["go", "test", pkg, "-run", run.join("|"), "-v", "-count", "1", "-timeout", "30m"],
        experimentalPrivilegedNesting: true,
      )
      .sync

    null
  }

  let testSkip(
    skip: [String!]!,
    ebpfProgs: [String!],
    pkg: String! = "./core/integration",
    race: Boolean,
  ): Void {
    go
      .env
      .withDirectory("/app", source)
      .withWorkdir("/app")
      .withEnvVariable("CGO_ENABLED", "1")
      .withExec(
        ["go", "test", pkg, "-v", "-skip", skip.join("|"), "-count", "1", "-race", "-timeout", "30m"],
        experimentalPrivilegedNesting: true,
      )
      .sync

    null
  }

  """
  Test Base
  """
  pub testBase: Void @check {
    testSkip(
      skip: ["TestProvision", "TestTelemetry", "TestModule", "TestGo", "TestPython", "TestTypescript", "TestElixir", "TestPHP", "TestJava", "TestContainer", "TestDockerfile", "TestLLM", "TestCLI", "TestEngine", "TestClientGenerator", "TestInterface", "TestCall", "TestShell", "TestDaggerCMD"],
      pkg: "./...",
      race: true,
    )
  }

  """
  Test Provision
  """
  pub testProvision: Void @check {
    testSpecific(["TestProvision"])
  }

  """
  Test Telemetry
  """
  pub testTelemetry: Void @check {
    testSpecific(["TestTelemetry"], pkg: "./dagql/idtui")
  }

  """
  Test Call and Shell
  """
  pub testCallAndShell: Void @check {
    testSpecific(["TestCall", "TestShell", "TestDaggerCMD"])
  }

  """
  Test CLI Engine
  """
  pub testCliEngine: Void @check {
    testSpecific(["TestCLI", "TestEngine"])
  }

  """
  Test Client Generator
  """
  pub testClientGenerator: Void @check {
    testSpecific(["TestClientGenerator"])
  }

  """
  Test Container
  """
  pub testContainer: Void @check {
    testSpecific(["TestContainer", "TestDockerfile"])
  }

  """
  Test Interface
  """
  pub testInterface: Void @check {
    testSpecific(["TestInterface"])
  }

  """
  Test LLM
  """
  pub testLlm: Void @check {
    testSpecific(["TestLLM"])
  }

  """
  Test Module Runtimes
  """
  pub testModuleRuntimes: Void @check {
    testSpecific(["TestGo", "TestPython", "TestTypescript", "TestElixir", "TestPHP", "TestJava"])
  }

  """
  Test Modules
  """
  pub testModules: Void @check {
    testSpecific(["TestModule"])
  }
}
