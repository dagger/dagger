[build]
publish = "build/"
command = "yarn build"
environment = { NODE_VERSION = "16.14" }

[context.production]
ignore = "false"

[context.deploy-preview]
ignore = "false"

[[redirects]]
# Embargoes compliance. DO NOT REMOVE
conditions = { Country = ["CU", "IR", "KP", "SY", "UA-43"] }
from = "/*"
to = "/restricted"
status = 302
force = true

[[redirects]]
from = "/t"
to = "https://api.amplitude.com"
status = 200

[[redirects]]
from = "/reference"
to = "/reference/alpine"
status = 302

[[redirects]]
from = "/1241/dagger-cloud"
to = "/1243/dagger-cloud"
status = 302

# https://docs.netlify.com/routing/redirects/rewrites-proxies/
[[redirects]]
from = "/sdk/cue/*"
to = "https://docs-v03x-sdk-cue-dagger-io.netlify.app/:splat"
status = 200
[[redirects]]
from = "/pets-code"
to = "https://github.com/netlify/petsofnetlify"
status = 200
[[redirects]]
from = "/pets-code/*"
to = "https://github.com/netlify/petsofnetlify/:splat"
status = 200

[[headers]]
for = "/*"
[headers.values]
Referrer-policy = "no-referrer-when-downgrade"
